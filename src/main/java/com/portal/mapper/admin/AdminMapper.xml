<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.portal.mapper.admin.AdminMapper">

	
<!-- 	<select id="selectAdminMemberAll" resultType="com.portal.domain.admin.AdminMemberDto">
		SELECT m.id, adminMemberId, password, authority 
		FROM AdminMember m 
		JOIN AdminAuthority a ON m.id = a.adminId
		GROUP BY m.id
	</select> -->
	
	<select id="selectAdminMemberAll" resultMap="adminMemberAll">
		SELECT m.id, adminMemberId, password, authority 
		FROM AdminMember m 
		JOIN AdminAuthority a ON m.id = a.adminId
	</select>
	
 	<resultMap type="com.portal.domain.admin.AdminMemberDto" id="adminMemberAll">
	<id column="id" property="id"/>
	<result column="adminMemberId" property="adminMemberId"/>
	<result column="password" property="password"/>
	<collection property="authorityList" ofType="string">
		<result column="authority" property="authority"/>
	</collection>
	</resultMap> 


	<select id="selectLastAdminMemberId" resultType="int">
		SELECT MAX(id) FROM AdminMember
	</select>

	<insert id="insertAdminAuthority">
		INSERT INTO AdminAuthority (adminId, authority)
		VALUES (#{adminId},#{authority})	
	</insert>

	<insert id="insertAdminMember">
		INSERT INTO AdminMember (adminMemberId, password)
		VALUES (#{adminMemberId},#{password})
	</insert>


</mapper>